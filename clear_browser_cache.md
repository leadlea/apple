# ブラウザキャッシュクリア方法 🧹

Mac Status PWAで定型文しか返ってこない場合、ブラウザキャッシュが原因の可能性があります。

## 🔍 **問題の症状**

- 異なる質問をしても同じような応答が返される
- チャット機能が正しく動作しない
- 古いバージョンの応答が表示される

## 🧹 **解決方法**

### **1. ハードリフレッシュ（推奨）**

#### **Chrome / Safari / Firefox**
```
Cmd + Shift + R
```

#### **または**
```
Cmd + F5
```

### **2. 開発者ツールでキャッシュクリア**

#### **Chrome**
1. `Cmd + Option + I` で開発者ツールを開く
2. ネットワークタブを選択
3. 「Disable cache」にチェック
4. ページをリロード

#### **Safari**
1. `Cmd + Option + I` で開発者ツールを開く
2. 「開発」メニュー → 「キャッシュを空にする」

### **3. ブラウザ設定からキャッシュクリア**

#### **Chrome**
1. `Cmd + ,` で設定を開く
2. 「プライバシーとセキュリティ」
3. 「閲覧履歴データの削除」
4. 「キャッシュされた画像とファイル」を選択
5. 「データを削除」

#### **Safari**
1. `Cmd + ,` で設定を開く
2. 「プライバシー」タブ
3. 「Webサイトデータを管理...」
4. 「すべてを削除」

### **4. PWAの再インストール**

#### **PWAがインストール済みの場合**
1. アプリケーションフォルダからMac Status PWAを削除
2. ブラウザで `http://localhost:8002/fixed` にアクセス
3. アドレスバーの「インストール」ボタンをクリック
4. 再インストール

## 🔧 **サーバー側の確認**

### **サーバーの再起動**
```bash
# 既存のサーバーを停止
pkill -f "python.*working_server"

# サーバーを再起動
python3 working_server.py
```

### **動作確認**
```bash
# チャット機能のテスト
python3 debug_chat_responses.py

# 簡単なテスト
python3 simple_chat_test.py
```

## 🧪 **テスト方法**

### **1. 異なる質問で応答をテスト**
```
「こんにちは」
「CPUの使用率は？」
「メモリの状況は？」
「ディスクの容量は？」
「システムの状況は？」
```

### **2. 期待される応答**
- **CPU質問**: CPU詳細情報と上位プロセス
- **メモリ質問**: メモリ使用状況の詳細
- **ディスク質問**: ディスク使用状況
- **システム質問**: 包括的なシステム状況

### **3. 問題が続く場合**
```bash
# デバッグスクリプトを実行
python3 debug_chat_responses.py

# ログを確認
tail -f logs/macstatus.log
```

## 🚨 **それでも解決しない場合**

### **1. 別のブラウザで試す**
- Chrome → Safari
- Safari → Firefox
- プライベート/シークレットモードで試す

### **2. 別のポートで起動**
```bash
# ポート8003で起動
sed -i '' 's/8002/8003/g' working_server.py
python3 working_server.py

# ブラウザで http://localhost:8003/fixed にアクセス
```

### **3. 完全なリセット**
```bash
# 全てのキャッシュをクリア
rm -rf ~/.cache/
rm -rf ~/Library/Caches/

# サーバー再起動
python3 working_server.py
```

## 📞 **サポート**

問題が解決しない場合は、以下の情報と共にお知らせください：

1. **使用ブラウザ**: Chrome/Safari/Firefox
2. **macOSバージョン**: システム情報
3. **エラーメッセージ**: 開発者ツールのコンソール
4. **テスト結果**: `debug_chat_responses.py` の出力

---

**キャッシュクリア後は、チャット機能が正常に動作するはずです！** ✨